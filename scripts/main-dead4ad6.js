+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}e.fn.emulateTransitionEnd=function(t){var i=!1,n=this;e(this).one(e.support.transition.end,function(){i=!0});var s=function(){i||e(n).trigger(e.support.transition.end)};return setTimeout(s,t),this},e(function(){e.support.transition=t()})}(jQuery),+function(e){"use strict";var t=function(i,n){this.options=e.extend({},t.DEFAULTS,n),this.$window=e(window).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(i),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0},t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$window.scrollTop(),i=this.$element.offset();return this.pinnedOffset=i.top-e},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var i=e(document).height(),n=this.$window.scrollTop(),s=this.$element.offset(),a=this.options.offset,o=a.top,r=a.bottom;"top"==this.affixed&&(s.top+=n),"object"!=typeof a&&(r=o=a),"function"==typeof o&&(o=a.top(this.$element)),"function"==typeof r&&(r=a.bottom(this.$element));var l=null!=this.unpin&&n+this.unpin<=s.top?!1:null!=r&&s.top+this.$element.height()>=i-r?"bottom":null!=o&&o>=n?"top":!1;if(this.affixed!==l){this.unpin&&this.$element.css("top","");var c="affix"+(l?"-"+l:""),d=e.Event(c+".bs.affix");this.$element.trigger(d),d.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(c).trigger(e.Event(c.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:i-r-this.$element.height()}))}}};var i=e.fn.affix;e.fn.affix=function(i){return this.each(function(){var n=e(this),s=n.data("bs.affix"),a="object"==typeof i&&i;s||n.data("bs.affix",s=new t(this,a)),"string"==typeof i&&s[i]()})},e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),i=t.data();i.offset=i.offset||{},i.offsetBottom&&(i.offset.bottom=i.offsetBottom),i.offsetTop&&(i.offset.top=i.offsetTop),t.affix(i)})})}(jQuery),+function(e){"use strict";var t=function(i,n){this.$element=e(i),this.options=e.extend({},t.DEFAULTS,n),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t=e.Event("show.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var i=this.$parent&&this.$parent.find("> .panel > .in");if(i&&i.length){var n=i.data("bs.collapse");if(n&&n.transitioning)return;i.collapse("hide"),n||i.data("bs.collapse",null)}var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return a.call(this);var o=e.camelCase(["scroll",s].join("-"));this.$element.one(e.support.transition.end,e.proxy(a,this)).emulateTransitionEnd(350)[s](this.$element[0][o])}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?void this.$element[i](0).one(e.support.transition.end,e.proxy(n,this)).emulateTransitionEnd(350):n.call(this)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var i=e.fn.collapse;e.fn.collapse=function(i){return this.each(function(){var n=e(this),s=n.data("bs.collapse"),a=e.extend({},t.DEFAULTS,n.data(),"object"==typeof i&&i);!s&&a.toggle&&"show"==i&&(i=!i),s||n.data("bs.collapse",s=new t(this,a)),"string"==typeof i&&s[i]()})},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(t){var i,n=e(this),s=n.attr("data-target")||t.preventDefault()||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),a=e(s),o=a.data("bs.collapse"),r=o?"toggle":n.data(),l=n.attr("data-parent"),c=l&&e(l);o&&o.transitioning||(c&&c.find('[data-toggle=collapse][data-parent="'+l+'"]').not(n).addClass("collapsed"),n[a.hasClass("in")?"addClass":"removeClass"]("collapsed")),a.collapse(r)})}(jQuery),angular.module("tbk.draggable",[]).directive("tbkDraggable",["$document",function(e){return function(t,i){function n(e){l=e.pageY-o,r=e.pageX-a,i.css({top:l+"px",left:r+"px"})}function s(){e.off("mousemove",n),e.off("mouseup",s)}var a=0,o=0,r=0,l=0;i.on("mousedown",function(t){t.preventDefault(),a=t.pageX-r,o=t.pageY-l,e.on("mousemove",n),e.on("mouseup",s)})}}]),angular.module("tbk.githubVersion",[]).directive("tbkGithubVersion",function(){var e={scope:{repo:"@tbkGithubVersion"},template:"<span>{{version}}</span>",controller:["$scope","$http",function(e,t){e.version="?",t.get("https://api.github.com/repos/"+e.repo+"/git/refs/tags",{cache:!0}).success(function(t){if(angular.isArray(t)&&t.length>0){var i=t[t.length-1],n=i.ref.search(/(\d(\.)?){3}$/);if(n>-1){var s=i.ref.substring(n,i.ref.length);e.version=s}}})}],link:function(e,t){t.addClass("tbk-github-version")}};return e}),function(e){e.module("angular-vissense.config",[]).value("angularVissenseConfig",{debug:!0}),e.module("angular-vissense.services",[]),e.module("angular-vissense.directives",["angular-vissense.services"]),e.module("angular-vissense.directives.debug",[]),e.module("angular-vissense",["angular-vissense.config","angular-vissense.directives","angular-vissense.services"])}(angular),function(e){e.module("angular-vissense.directives").directive("vissenseMonitor",["VisSense","VisUtils",function(e,t){var i={scope:{monitor:"=?ngModel",config:"@",onUpdate:"&",onHidden:"&",onVisible:"&",onFullyvisible:"&",onPercentagechange:"&",onVisibilitychange:"&"},link:function(i,n){var s=t.debounce(function(){i.$digest(),i.$parent.$digest()},1e3);n.addClass("vissense-monitor"),i.monitor=new e(n[0],i.config).monitor({update:function(e){i.onUpdate({monitor:e}),s()},hidden:function(e){i.onHidden({monitor:e})},visible:function(e){i.onVisible({monitor:e})},fullyvisible:function(e){i.onFullyvisible({monitor:e})},percentagechange:function(e,t,n){i.onPercentagechange({newValue:e,oldValue:t,monitor:n})},visibilitychange:function(e){i.onVisibilitychange({monitor:e}),n.removeClass("vissense-monitor-hidden"),n.removeClass("vissense-monitor-fullyvisible"),n.removeClass("vissense-monitor-visible"),n.addClass(e.state().fullyvisible?"vissense-monitor-fullyvisible":e.state().hidden?"vissense-monitor-hidden":"vissense-monitor-visible")}}).startAsync(),i.$on("$destroy",function(){i.monitor.stop()})}};return i}])}(angular),function(e){e.module("angular-vissense.directives.debug").directive("vissenseMetricsInfocard",[function(){var e={scope:{elementId:"@vissenseMetricsInfocard"},controller:["$scope","$interval","VisSense","VisUtils","VisSenseService",function(e,t,i,n,s){var a=s.fromId(e.elementId,{}),o=a.metrics({strategy:new i.VisMon.Strategy.PollingStrategy({interval:100})}).start(),r=a.monitor({visibilitychange:n.debounce(function(t){e.$apply(function(){e.state=t.state().state})},0)}).start(),l=n.debounce(function(){e.$apply(function(){e.timeHidden=o.getMetric("time.hidden").get(),e.timeVisible=o.getMetric("time.visible").get(),e.timeFullyVisible=o.getMetric("time.fullyvisible").get(),e.timeRelativeVisible=o.getMetric("time.relativeVisible").get(),e.duration=o.getMetric("time.duration").get(),e.percentage={current:o.getMetric("percentage").get(),max:o.getMetric("percentage.max").get(),min:o.getMetric("percentage.min").get()}})},0),c=t(l,200);e.$on("$destroy",function(){o.stop(),r.stop(),t.cancel(c)})}],template:'<style>.vissense-metrics-container {margin: 0px;position: fixed;left: 42px;bottom: 13px;width: 600px;height: 200px;box-shadow: 3px 3px 15px 3px rgba(0, 0, 0, 0.4);z-index: 99999;background-color: rgba(242,242,242,0.9);}.vissense-flexbox {display: box;display: -webkit-box;display: -moz-box;box-orient: horizontal;-webkit-box-orient: horizontal;-moz-box-orient: horizontal;}.vissense-flexbox .box {font-size: 23px;padding: 10px;width: 150px;text-align: center;}.vissense-flexbox .vissense-box small {color: #888;}</style><div class="vissense-metrics-container"><div style="text-align:center">{{state}}</div><div class="vissense-flexbox"><div class="box"><div>{{timeVisible / 1000 | number:1}}s</div><small>time visible</small></div><div class="box"><div>{{timeFullyVisible / 1000 | number:1}}s</div><small>time fullyvisible</small></div><div class="box"><div>{{timeHidden * 100 / duration | number:0}}%</div><small>percentage hidden</small></div><div class="box"><div>{{timeVisible * 100 / duration | number:0}}%</div><small>percentage visible</small></div></div><div class="vissense-flexbox"><div class="box"><div>{{timeHidden / 1000 | number:1}}s</div><small>time hidden</small></div><div class="box"><div>{{timeRelativeVisible / 1000 | number:1}}s</div><small>time relative</small></div><div class="box"><div>{{percentage.min * 100 | number:0}}%</div><small>percentage min</small></div><div class="box"><div>{{percentage.max * 100 | number:0}}%</div><small>percentage max</small></div></div></div>'};return e}])}(angular),function(e){e.module("angular-vissense.directives.debug").directive("vissensePercentageTimeTest",["VisSenseService",function(e){var t={scope:{elementId:"@vissensePercentageTimeTest",timeLimit:"@",percentageLimit:"@",interval:"@"},controller:["$scope",function(t){var i=e.fromId(t.elementId);t.passed=!1,i.onPercentageTimeTestPassed(function(){t.$apply(function(){t.passed=!0})},{percentageLimit:t.percentageLimit||.5,timeLimit:t.timeLimit||1e3,interval:t.interval||100})}],template:"<span>{{percentageLimit * 100 | number:0}}/{{timeLimit / 1000 | number:0}} test: <span data-ng-style=\"{ color : passed ? 'green' : 'red'}\">{{passed}}</span></span>"};return t}]).directive("vissenseFiftyOneTest",[function(){var e={scope:{elementId:"@vissenseFiftyOneTest"},template:'<span data-vissense-percentage-time-test="{{elementId}}" data-percentage-limit="0.5" data-time-limit="1000" data-interval="100"></span>'};return e}]).directive("vissenseSixtyOneTest",[function(){var e={scope:{elementId:"@vissenseSixtyOneTest"},template:'<span data-vissense-percentage-time-test="{{elementId}}" data-percentage-limit="0.6" data-time-limit="1000" data-interval="100"></span>'};return e}])}(angular),function(e){e.module("angular-vissense.directives.debug").directive("vissensePercentage",["VisSenseService","VisUtils","$timeout",function(e,t,i){var n={scope:{elementId:"@vissensePercentage"},controller:["$scope",function(n){n.percentage="?",i(function(){var i=e.fromId(n.elementId).monitor({percentagechange:t.debounce(function(){n.$apply(function(){n.percentage=i.state().percentage})},10)}).start();n.$on("$destroy",function(){i.stop()})})}],template:"<span>{{percentage * 100 | number:0}}%</span>"};return n}])}(angular),function(e){e.module("angular-vissense.directives.debug").directive("vissenseState",["VisSenseService","VisUtils","$timeout",function(e,t,i){var n={scope:{elementId:"@vissenseState",fullyvisible:"@",hidden:"@",strategy:"@"},link:function(n){n.state="?",i(function(){var i=e.fromId(n.elementId,{fullyvisible:parseFloat(n.fullyvisible)||1,hidden:parseFloat(n.hidden)||0}).monitor({visibilitychange:t.debounce(function(e){n.$apply(function(){n.state=e.state().state})},10)}).start();n.$on("$destroy",function(){i.stop()})})},template:"<span>{{state}}</span>"};return n}]).directive("vissenseStateDebug",["VisSenseService","VisUtils","$timeout",function(e,t,i){var n={scope:{elementId:"@vissenseStateDebug"},controller:["$scope",function(n){n.state={},i(function(){var i=e.fromId(n.elementId).monitor({update:t.debounce(function(e){n.$apply(function(){n.state=e.state()})},10)}).start();n.$on("$destroy",function(){i.stop()})})}],template:"{{ state | json }}"};return n}])}(angular),function(e){e.module("angular-vissense.services").factory("VisSense",["$window",function(e){return e.VisSense}]).factory("VisUtils",["VisSense",function(e){return e.Utils}]).factory("VisSenseService",["VisSense",function(e){var t=function(t,i){var n=document.getElementById(t);return new e(n,i)};return{fromId:t}}])}(angular),!function(e,t){"use strict";e.VisSense=t(e,e.document)}(this,function(e,t,i){"use strict";function n(e,t){var i=v;return function(){var n=this,s=arguments;i(),i=a(function(){e.apply(n,s)},t)}}function s(e,t){var n=g(t),s=g(e);if(!n&&!s)return t;if(!n||!s)return n?t:e;for(var a=Object.keys(t),o=0,r=a.length;r>o;o++){var l=a[o];e[l]===i&&(e[l]=t[l])}return e}function a(e,t){var i=setTimeout(function(){e()},t||0);return function(){clearTimeout(i)}}function o(e,t){return function(){var n=arguments;return a(function(){e.apply(i,n)},t||0)}}function r(e,t){return function(){return(p(e)?e():e)?t():i}}function l(e,t,i){for(var n=-1,s=Object.keys(t),a=s.length,o=p(i);++n<a;){var r=s[n];e[r]=o?i(e[r],t[r],r,e,t):t[r]}return e}function c(e){return e}function d(e){return e!==i}function u(e){return e&&"object"==typeof e&&"number"==typeof e.length&&"[object Array]"===Object.prototype.toString.call(e)||!1}function m(e){return e&&1===e.nodeType||!1}function p(e){return"function"==typeof e||!1}function g(e){var t=typeof e;return"function"===t||e&&"object"===t||!1}function v(){}function h(){return(new Date).getTime()}function f(){return{height:e.innerHeight,width:e.innerWidth}}function b(t){return e.getComputedStyle(t,null)}function y(e,t){return e.getPropertyValue(t)}function w(e,t){t||(t=b(e));var i=y(t,"display");if("none"===i)return!1;var n=y(t,"visibility");return"hidden"===n||"collapse"===n?!1:e.parentNode&&e.parentNode.style?w(e.parentNode,b(e)):!0}function _(e){if(e===t)return!0;if(!e||!e.parentNode)return!1;var i=b(e),n=w(e,i);return n!==!0?!1:!0}function x(e,t){return!e||e.width<=0||e.height<=0?!1:e.bottom>0&&e.right>0&&e.top<t.height&&e.left<t.width}function S(e){var t=e.getBoundingClientRect(),i=f();if(!x(t,i)||!_(e))return 0;var n=0,s=0;return t.top>=0?n=Math.min(t.height,i.height-t.top):t.bottom>0&&(n=Math.min(i.height,t.bottom)),t.left>=0?s=Math.min(t.width,i.width-t.left):t.right>0&&(s=Math.min(i.width,t.right)),Math.round(n*s/(t.height*t.width)*1e3)/1e3}function k(){return C?!t[C[0]]:!0}function $(e,t){if(!(this instanceof $))return new $(e,t);if(!m(e))throw new Error("not an element node");this._element=e,this._config=s(t,{fullyvisible:1,hidden:0,percentageHook:S,visibilityHooks:[]}),this._config.visibilityHooks.push(function(){return k()})}function V(e,t){var i=e.state(),n=i.percentage;return t&&n===t.percentage&&t.percentage===t.previous.percentage?t:i.hidden?$.VisState.hidden(n,t):i.fullyvisible?$.VisState.fullyvisible(n,t):$.VisState.visible(n,t)}function E(e,t){this._visobj=e,this._state={},this._pubsub=new P,this._events=["update","hidden","visible","fullyvisible","percentagechange","visibilitychange"];var i=s(t,{strategy:[new E.Strategy.PollingStrategy,new E.Strategy.EventStrategy],async:!1});this._setStrategy(i.strategy),this._pubsub.on("update",function(e){e._state.code!==e._state.previous.code&&e._pubsub.publish("visibilitychange",[e])}),this._pubsub.on("update",function(e){var t=e._state.percentage,i=e._state.previous.percentage;t!==i&&e._pubsub.publish("percentagechange",[t,i,e])}),this._pubsub.on("visibilitychange",function(e){e._state.visible&&!e._state.previous.visible&&e._pubsub.publish("visible",[e])}),this._pubsub.on("visibilitychange",function(e){e._state.fullyvisible&&e._pubsub.publish("fullyvisible",[e])}),this._pubsub.on("visibilitychange",function(e){e._state.hidden&&e._pubsub.publish("hidden",[e])});for(var n=0,a=this._events.length;a>n;n++)i[this._events[n]]&&this.on(this._events[n],i[this._events[n]])}var C=function(e){for(var i="visibilitychange",n=[["hidden",i],["mozHidden","moz"+i],["webkitHidden","webkit"+i],["msHidden","ms"+i]],s=0,a=n.length;a>s;s++)if(t[n[s][0]]!==e)return n[s]}(),P=function(e){function t(e){this._cache={},this._config=s(e,{async:!1})}return t.prototype.on=function(t,i){if(!p(i))return v;this._cache[t]||(this._cache[t]=[]);var n=function(t){return i.apply(e,t||[])},s=this._config.async?o(n):n;this._cache[t].push(s);var a=this;return function(){var e=a._cache[t].indexOf(s);return e>-1?(a._cache[t].splice(e,1),!0):!1}},t.prototype.publish=function(t,i){var n=this._cache[t],s=function(t,i){for(var n=t?t.length:0,s=0;n>s;s++)t[s](i||[]);return e};return this._config.async?o(s)(n,i):s(n,i)},t}();$.prototype.state=function(){for(var e=0,t=this._config.visibilityHooks.length;t>e;e++)if(!this._config.visibilityHooks[e](this._element))return $.VisState.hidden(0);var i=this._config.percentageHook(this._element);return i<=this._config.hidden?$.VisState.hidden(i):i>=this._config.fullyvisible?$.VisState.fullyvisible(i):$.VisState.visible(i)},$.prototype.percentage=function(){return this.state().percentage},$.prototype.isFullyVisible=function(){return this.state().fullyvisible},$.prototype.isVisible=function(){return this.state().visible},$.prototype.isHidden=function(){return this.state().hidden},$.fn=$.prototype,$.of=function(e,t){return new $(e,t)};var M={HIDDEN:[0,"hidden"],VISIBLE:[1,"visible"],FULLY_VISIBLE:[2,"fullyvisible"]};return $.VisState=function(){function e(e,t,i){return i&&delete i.previous,{code:e[0],state:e[1],percentage:t,previous:i||{},fullyvisible:e[0]===M.FULLY_VISIBLE[0],visible:e[0]===M.VISIBLE[0]||e[0]===M.FULLY_VISIBLE[0],hidden:e[0]===M.HIDDEN[0]}}return{hidden:function(t,i){return e(M.HIDDEN,t,i)},visible:function(t,i){return e(M.VISIBLE,t,i)},fullyvisible:function(t,i){return e(M.FULLY_VISIBLE,t,i)}}}(),E.prototype._setStrategy=function(e){this._strategy=new E.Strategy.CompositeStrategy(e)},E.prototype.visobj=function(){return this._visobj},E.prototype.state=function(){return this._state},E.prototype.start=function(e){var t=s(e,{async:!1});if(this._cancelAsyncStart&&this._cancelAsyncStart(),t.async)return this.startAsync();var i=function(e,t){return e.update(),t.start(e),e};return i(this,this._strategy)},E.prototype.startAsync=function(e){this._cancelAsyncStart&&this._cancelAsyncStart();var t=this,i=a(function(){t.start(l(s(e,{}),{async:!1}))});return this._cancelAsyncStart=function(){i(),t._cancelAsyncStart=null},this},E.prototype.stop=function(){return this._cancelAsyncStart?this._cancelAsyncStart():this._strategy.stop(this),i},E.prototype.use=function(e){return this.stop(),this._setStrategy(e),this.start()},E.prototype.update=function(){this._state=V(this._visobj,this._state),this._pubsub.publish("update",[this])},E.prototype.onUpdate=function(e){return this._pubsub.on("update",e)},E.prototype.onVisibilityChange=function(e){return this._pubsub.on("visibilitychange",e)},E.prototype.onPercentageChange=function(e){return this._pubsub.on("percentagechange",e)},E.prototype.onVisible=function(e){return this._pubsub.on("visible",e)},E.prototype.onFullyVisible=function(e){return this._pubsub.on("fullyvisible",e)},E.prototype.onHidden=function(e){return this._pubsub.on("hidden",e)},E.prototype.on=function(e,t){var i=this;switch(e){case"update":return i.onUpdate(t);case"hidden":return i.onHidden(t);case"visible":return i.onVisible(t);case"fullyvisible":return i.onFullyVisible(t);case"percentagechange":return i.onPercentageChange(t);case"visibilitychange":return i.onVisibilityChange(t)}return this._pubsub.on(e,t)},E.Strategy=function(){},E.Strategy.prototype.start=function(){throw new Error("Strategy#start needs to be overridden.")},E.Strategy.prototype.stop=function(){throw new Error("Strategy#stop needs to be overridden.")},E.Strategy.CompositeStrategy=function(e){this._strategies=u(e)?e:[e]},E.Strategy.CompositeStrategy.prototype=Object.create(E.Strategy.prototype),E.Strategy.CompositeStrategy.prototype.start=function(e){for(var t=0,i=this._strategies.length;i>t;t++)this._strategies[t].start(e)},E.Strategy.CompositeStrategy.prototype.stop=function(e){for(var t=0,i=this._strategies.length;i>t;t++)this._strategies[t].stop(e)},E.Strategy.PollingStrategy=function(e){this._config=s(e,{interval:1e3}),this._started=!1},E.Strategy.PollingStrategy.prototype=Object.create(E.Strategy.prototype),E.Strategy.PollingStrategy.prototype.start=function(e){return this._started||(this._clearInterval=function(t){var i=setInterval(function(){e.update()},t);return function(){clearInterval(i)}}(this._config.interval),this._started=!0),this._started},E.Strategy.PollingStrategy.prototype.stop=function(){return this._started?(this._clearInterval(),this._started=!1,!0):!1},E.Strategy.EventStrategy=function(e){this._config=s(e,{debounce:50}),this._started=!1},E.Strategy.EventStrategy.prototype=Object.create(E.Strategy.prototype),E.Strategy.EventStrategy.prototype.start=function(e){if(!this._started){var t=this;this._removeEventListeners=function(){var i=n(function(){e.update()},t._config.debounce);return C&&addEventListener(C[1],i),addEventListener("scroll",i),addEventListener("resize",i),function(){removeEventListener("resize",i),removeEventListener("scroll",i),C&&removeEventListener(C[1],i)}}(),this._started=!0}return this._started},E.Strategy.EventStrategy.prototype.stop=function(){return this._started?(this._removeEventListeners(),this._started=!1,!0):!1},$.VisMon=E,$.PubSub=P,$.fn.monitor=function(e){return new E(this,e)},$.Utils={async:o,debounce:n,defaults:s,defer:a,extend:l,fireIf:r,identity:c,isArray:u,isDefined:d,isElement:m,isFunction:p,isObject:g,isPageVisible:k,isVisibleByStyling:_,noop:v,now:h,percentage:S,_viewport:f,_isInViewport:x,_isDisplayed:w,_computedStyle:b,_styleProperty:y},$}),!function(e){"use strict";!function(e){Date.now||(Date.now=function(){return(new Date).getTime()}),e.performance||(e.performance=e.performance||{},e.performance.now=e.performance.now||e.performance.mozNow||e.performance.msNow||e.performance.oNow||e.performance.webkitNow||Date.now)}(e);var t=function(){function e(t){return this instanceof e?((+t!==t||0>t)&&(t=0),void(this._$={i:t})):new e(t)}var t=Math.pow(2,32),i=function(e){return+e!==e?1:+e};return e.MAX_VALUE=t,e.prototype.inc=function(e){return this.set(this.get()+i(e)),this.get()},e.prototype.dec=function(e){return this.inc(-1*i(e))},e.prototype.clear=function(){var e=this._$.i;return this._$.i=0,e},e.prototype.get=function(){return this._$.i},e.prototype.set=function(e){return this._$.i=i(e),this._$.i<0?this._$.i=0:this._$.i>t&&(this._$.i-=t),this.get()},e}(),i=function(){function t(e){return this instanceof t?(this._config=e||{},this._config.performance=this._config.performance===!0,void(this._$={ts:0,te:0,r:!1})):new t(e)}var i=function(t){return t?e.performance.now():Date.now()},n=function(e,t){return+e===e?+e:t};return t.prototype._orNow=function(e){return n(e,i(this._config.performance))},t.prototype.startIf=function(e,t){return e&&(this._$.r=!0,this._$.ts=this._orNow(t),this._$.te=null),this},t.prototype.start=function(e){return this.startIf(!this._$.r,e)},t.prototype.restart=function(e){return this.startIf(!0,e)},t.prototype.stop=function(e){return this.stopIf(!0,e)},t.prototype.stopIf=function(e,t){return this._$.r&&e&&(this._$.te=this._orNow(t),this._$.r=!1),this},t.prototype.interim=function(e){return this._$.r?this._orNow(e)-this._$.ts:0},t.prototype.get=function(e){return this._$.te?this._$.te-this._$.ts:this.time(e)},t.prototype.running=function(){return this._$.r},t.prototype.getAndRestartIf=function(e,t){var i=this.get(t);return e&&this.restart(t),i},t.prototype.forceStart=t.prototype.restart,t.prototype.time=t.prototype.interim,t}();e.CountOnMe={counter:t,stopwatch:i}}(window),function(e,t,i,n){"use strict";function s(e,t){e>0&&t(e)}function a(){this.metrics={},this.addMetric=function(e,t){this.metrics[e]=t},this.getMetric=function(e){return this.metrics[e]}}function o(e){function t(e){var t=e.state(),i=t.percentage;l.getMetric("percentage").set(i),i<l.getMetric("percentage.min").get()&&l.getMetric("percentage.min").set(i),i>l.getMetric("percentage.max").get()&&l.getMetric("percentage.max").set(i)}function i(e){var t=e.state();s(m.get(),function(e){l.getMetric("time.duration").set(e)}),s(u.running()?u.stop().get():-1,function(e){l.getMetric("time.hidden").inc(e)}),s(c.running()?c.stop().get():-1,function(e){l.getMetric("time.visible").inc(e),l.getMetric("time.relativeVisible").inc(e*t.percentage)}),s(d.running()?d.stop().get():-1,function(e){l.getMetric("time.fullyvisible").inc(e)}),c.startIf(t.visible),d.startIf(t.fullyvisible),u.startIf(t.hidden),m.startIf(!m.running())}var o=this,r=!1,l=new a,c=n.stopwatch(),d=n.stopwatch(),u=n.stopwatch(),m=n.stopwatch();l.addMetric("time.visible",new n.counter),l.addMetric("time.fullyvisible",new n.counter),l.addMetric("time.hidden",new n.counter),l.addMetric("time.relativeVisible",new n.counter),l.addMetric("time.duration",new n.counter),l.addMetric("percentage",new n.counter),l.addMetric("percentage.max",new n.counter(0)),l.addMetric("percentage.min",new n.counter(1));var p=function(){i(e),t(e)};e.onUpdate(function(){p()}),o.getMetric=function(e){return l.getMetric(e)},o.running=function(){return r},o.start=function(){return r||(e.start(),p(),r=!0),this},o.stop=function(){return r&&(p(),e.stop(),r=!1),this}}t.fn.metrics=function(e){if(this._metrics)return this._metrics;var t=e||{};return this._metrics=new o(this.monitor(t)),this._metrics}}.call(this,window,window.VisSense,window.VisSense.Utils,window.CountOnMe),function(e,t){"use strict";t(e,e.VisSense)}(this,function(e,t,i){"use strict";t.fn.onPercentageTimeTestPassed=function(e,n){var s=t.Utils.defaults(n,{percentageLimit:1,timeLimit:1e3,interval:100,debounce:30,strategy:i}),a=0,o=null,r=null,l=null,c=this.monitor({strategy:s.strategy,visible:function(){r=r||c.visobj().monitor({strategy:[],update:function(){var i=r.state().percentage;if(i<s.percentageLimit)o=null;else{var n=t.Utils.now();o=o||n,a=n-o}a>=s.timeLimit?(clearTimeout(l),c.stop(),e()):l=setTimeout(function(){r.update()},s.interval)}}),r.update()},hidden:function(){clearTimeout(l)}});c.start()},t.fn.on50_1TestPassed=function(e,i){this.onPercentageTimeTestPassed(e,t.Utils.extend(i||{},{percentageLimit:.5,timeLimit:1e3,debounce:30,interval:100}))}}),function(e){"use strict";e.module("vissensePlayground",["angular-vissense","angular-vissense.directives.debug","tbk.draggable","tbk.githubVersion","restangular","vissense.playground.states","nvd3ChartDirectives","hljs"]).filter("reverse",function(){return function(e){return e?e.slice().reverse():e}}).filter("range",["$log",function(e){return function(t,i){try{i=parseInt(i,10);for(var n=0;i>n;n++)t.push(n)}catch(s){e.warn("invalid input in repeatreange"+i)}return t}}])}(angular),function(e){"use strict";e.module("vissense.playground.states",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){t.when("","/demos/overview"),t.when("/","/demos/overview"),e.state("home",{url:"/",templateUrl:"partials/demos.html",controller:"DemoCtrl"}).state("demos",{"abstract":!0,url:"/demos",template:"<ui-view/>"}).state("demos.overview",{url:"/overview",templateUrl:"partials/demos.html",controller:"DemoCtrl"}).state("demos.fire-callbacks",{url:"/demo-fire-callbacks",templateUrl:"partials/demos/demo_fire_callbacks.html",controller:"FireCallbacksDemoCtrl"}).state("demos.track-visibility",{url:"/demo-track-visibility",templateUrl:"partials/demos/demo_track_visibility.html",controller:"TrackVisiblityDemoCtrl"}).state("demos.track-sections",{url:"/demo-track-sections",templateUrl:"partials/demos/demo_track_sections.html",controller:"TrackSectionsDemoCtrl"}).state("demos.draggable-element",{url:"/single",templateUrl:"partials/demos/demo_draggable_element.html"}).state("demos.percentage-time-test",{url:"/demo-percentage-time-test",templateUrl:"partials/demos/demo_percentage_time_test.html"}).state("demos.angular-vissense-monitor",{url:"/demo-angular-vissense-monitor",templateUrl:"partials/demos/demo_angular_vissense_monitor.html",controller:"AngularVissenseMonitorDemoCtrl"}).state("demos.angular-many-monitors",{url:"/demo-angular-many-monitors",templateUrl:"partials/demos/demo_angular_many_monitors.html",controller:"ManyMonitorsDemoCtrl"}),t.otherwise("/demos/overview")}])}(angular),function(e,t){"use strict";e.module("vissensePlayground").directive("tbkCodePrettify",["$window",function(e){var t={scope:{lang:"@",showLinenums:"@"},compile:function(t){{var i=t.html();e.prettyPrintOne(i)}return function(t,i){i.addClass("prettyprint"),t.lang&&i.addClass("lang-"+t.lang),t.showLinenums&&i.addClass("linenums"),setTimeout(function(){e.prettyPrint()},1)}}};return t}]).directive("tbkDefaultDraggableElement",[function(){var e={scope:{elementId:"@tbkDefaultDraggableElement"},controller:["$scope",function(e){e.model={elementId:e.elementId}}],templateUrl:"partials/directives/default-draggable-element.html"};return e}]).directive("tbkHeader",function(){var e={scope:{},templateUrl:"partials/navs/header.html",controller:[function(){}],link:function(e,t){function i(){o.classList.remove("open"),r.classList.remove("open"),a.classList.remove("open")}function n(){o.classList.toggle("open"),r.classList.toggle("open"),a.classList.toggle("open"),a.classList.add("opened")}t.addClass("tbkHeader");var s=document.querySelector.bind(document),a=s(".navdrawer-container"),o=document.body,r=s(".app-bar"),l=s(".menu"),c=s("main");c.addEventListener("click",i),l.addEventListener("click",n),a.addEventListener("click",function(e){("A"===e.target.nodeName||"LI"===e.target.nodeName)&&i()})}};return e}).directive("tbkGithubForkRibbon",function(){var e={scope:{repo:"@tbkGithubForkRibbon",label:"@"},template:'<div class="github-fork-ribbon-wrapper right"><div class="github-fork-ribbon"><a data-ng-href="{{href}}">{{text}}</a></div></div>',controller:["$scope",function(e){e.href="https://github.com/"+e.repo,e.text=e.label||"Fork me on GitHub"}],link:function(e,t){t.addClass("tbk-github-fork-ribbon")}};return e}).directive("tbkDefaultDemoNavigation",function(){var e={scope:{},template:'<section data-tbk-demo-navigation data-list="list"></section>',controller:["$scope",function(e){e.list=[{text:"draggable element",path:"/demos/single"},{text:"percentage time test",path:"/demos/demo-percentage-time-test"},{text:"fire callbacks",path:"/demos/demo-fire-callbacks"},{text:"track viewtime",path:"/demos/demo-track-visibility"},{text:"track sections",path:"/demos/demo-track-sections"},{text:"angular directive: vissense-monitor",path:"/demos/demo-angular-vissense-monitor"},{text:"angular directive: vissense-monitor (many instances)",path:"/demos/demo-angular-many-monitors"}]}],link:function(e,t){t.addClass("tbk-default-demo-navigation")}};return e}).directive("tbkDemoNavigation",function(){var e={scope:{list:"="},template:'<section class="styleguide__article-nav"><div class="container-medium"><nav class="article-nav"><a data-ng-click="navigate(current.path)" class="article-nav-link article-nav-link--prev"><p  class="article-nav-count">{{currentC + 1}}</p><p>{{current.text}}</p></a> <a data-ng-click="navigate(current2.path)" class="article-nav-link article-nav-link--next"><p  class="article-nav-count">{{current2C + 1}}</p><p>{{current2.text}}</p></a></nav></div></section>',controller:["$scope","$location",function(e,i){function n(){e.cursor=t.indexOf(e.list,t.findWhere(e.list,function(e){return e.path===i.path()
})),e.cursor=e.cursor>0?e.cursor:0,console.log(e.cursor),e.currentC=e.cursor<=0?e.list.length-1:e.cursor-1,e.current=e.list[e.currentC],e.current2C=e.cursor<e.list.length-1?e.cursor+1:0,e.current2=e.list[e.current2C]}n(),e.navigate=function(e){i.path(e)}}],link:function(e,t){t.addClass("tbk-demo-navigation")}};return e})}(angular,_),function(e,t,i,n,s){"use strict";i.module("vissensePlayground").controller("GettingStartedCtrl",["$window","$scope",function(e,t){t.title="VisSense.js",t.scrollToElement=function(e){s("html, body").animate({scrollTop:s("#"+e).offset().top},500)},t.collapse=function(e,t){s(e).collapse(t?t:"toggle")},s("#main-page-affix").affix({offset:{top:325,bottom:0}})}])}(window,document,angular,_,jQuery),function(e,t,i){"use strict";i.module("vissensePlayground").controller("MainCtrl",[function(){}])}(window,document,angular),function(e,t,i){"use strict";i.module("vissensePlayground").controller("ManyMonitorsDemoCtrl",["$scope","$log",function(e,t){e.model={monitorCount:42,monitorCountMax:200},e.model.logEvent=function(e){t.info(e)}}])}(window,document,angular,VisSense,VisSense.Utils,_,moment,jQuery),function(e,t,i,n,s,a){"use strict";i.module("vissensePlayground").controller("AngularVissenseMonitorDemoCtrl",["$scope",function(e){e.model={events:[]},e.addEvent=function(t,i){e.model.events.push({time:Date.now(),name:t,description:i}),e.model.events=a.last(e.model.events,5)},e.addPercentageEvent=function(t,n){var s=i.isNumber(n)?Math.round(1e3*n)/10:"?",a=Math.round(1e3*t)/10;e.addEvent("percentagechange","Element's percentage changed! "+s+"% -> "+a+"%")}}])}(window,document,angular,VisSense,VisSense.Utils,_,moment,jQuery),function(e,t,i){"use strict";i.module("vissensePlayground").controller("DemoCtrl",["$scope",function(e){e.subtitle="demos"}])}(window,document,angular,VisSense,VisSense.Utils,_,moment,jQuery),function(e,t,i,n,s,a){"use strict";i.module("vissensePlayground").controller("FireCallbacksDemoCtrl",["$log","$scope",function(e,t){t.model={events:[]},t.addEvent=function(e,i){t.model.events.push({time:Date.now(),name:e,description:i}),t.model.events=a.last(t.model.events,100)},t.addPercentageEvent=function(e,n){var s=i.isNumber(n)?Math.round(1e3*n)/10:"?",a=Math.round(1e3*e)/10;t.addEvent("percentagechange","Element's percentage changed! "+s+"% -> "+a+"%")}}])}(window,document,angular,VisSense,VisSense.Utils,_,moment,jQuery),function(e,t,i,n,s,a,o,r){"use strict";i.module("vissensePlayground").controller("TrackSectionsDemoCtrl",["$window","$document","$scope","VisSense",function(e,t,i,n){i.scrollToElement=function(e){r("html, body").animate({scrollTop:r("#"+e).offset().top},500)};var s=function(e){var t=r("#"+e),s=function(e){var i=e.state().percentage,n=e.state().previous.percentage||0,s=i-n,a=500*Math.max(s,.25),o=Math.max(i,.25);t.fadeTo(a,o)},a=new n(t[0]).monitor({strategy:n.VisMon.Strategy.EventStrategy({debounce:50}),percentagechange:function(e,t,i){s(i)}}).start();i.$on("$destroy",function(){a.stop()})};s("examples-section"),s("demo-section"),s("plugins-section")}])}(window,document,angular,VisSense,VisSense.Utils,_,moment,jQuery),function(e,t,i){"use strict";i.module("vissensePlayground").controller("TrackVisiblityDemoCtrl",[function(){}])}(window,document,angular,VisSense,VisSense.Utils,_,moment,jQuery),function(e){try{e=angular.module("vissensePlayground")}catch(t){e=angular.module("vissensePlayground",[])}e.run(["$templateCache",function(e){e.put("partials/demos.html",'<header class="container"><h2 class="xlarge">Demos</h2><p>a small collection of examples demonstrating VisSense.js</p></header><ul class="list-links list-links--primary"><li><a data-ui-sref="demos.draggable-element">draggable element</a></li><li><a data-ui-sref="demos.percentage-time-test">percentage time test</a></li><li><a data-ui-sref="demos.fire-callbacks">fire callbacks</a></li><li><a data-ui-sref="demos.track-visibility">track viewtime</a></li><li><a data-ui-sref="demos.track-sections">track sections</a></li><li><a data-ui-sref="demos.angular-vissense-monitor">angular directive: vissense-monitor</a></li><li><a data-ui-sref="demos.angular-many-monitors">angular directive: vissense-monitor (many monitors)</a></li></ul>')}])}(),function(e){try{e=angular.module("vissensePlayground")}catch(t){e=angular.module("vissensePlayground",[])}e.run(["$templateCache",function(e){e.put("partials/main.html","")}])}(),function(e){try{e=angular.module("vissensePlayground")}catch(t){e=angular.module("vissensePlayground",[])}e.run(["$templateCache",function(e){e.put("partials/demos/demo_angular_many_monitors.html",'<section data-tbk-default-demo-navigation=""></section><header class="container"><h2>[Demo] Angular Directives: vissense-monitor</h2></header><style>\n  input#many-monitors-count {\n    padding: 13px;\n    min-width: 330px;\n    margin: 3px;\n    font-size: 2em;\n  }\n\n  .vissense-monitor {\n    margin: 10px;\n    padding: 10px;\n    height: 100px;\n    width: 100px;\n    float: left;\n\n    border: 1px solid #333;\n  }\n\n  .vissense-monitor-hidden {\n    background-color: red;\n  }\n\n  .vissense-monitor-visible {\n    background-color: orange;\n  }\n\n  .vissense-monitor-fullyvisible {\n    background-color: green;\n  }\n\n</style><section class="styleguide__editorial-header"><div class="editorial-header"><div class="container"><p class="editorial-header__excerpt">This pages demonstrates the dynamic observation of volatile elements. You can create and destroy monitor instances with the input form below. Take a look at the console while playing with the value and/or scrolling around.</p></div></div></section><div class="container" id="draggable-example-container" style="margin-top: 30px;"><div class="clearfix"><form><label for="many-monitors-count">Active monitors:</label> <input id="many-monitors-count" class="" type="number" data-ng-model="model.monitorCount" min="1" max="{{model.monitorCountMax}}" data-ng-max="{{model.monitorCountMax}}"></form><div class="monitor-container" data-ng-repeat="i in [] | range:model.monitorCount"><div vissense-monitor="" on-fullyvisible="model.logEvent(\'fullyvisible\')" on-visible="model.logEvent(\'visible\')" on-hidden="model.logEvent(\'hidden\')"></div></div></div><br data-ng-repeat="i in [] | range:5"><div class="container"><h3>Code</h3><section class="styleguide__editorial-header"><div class="editorial-header"><div class="container"><p class="editorial-header__excerpt">The following example is made with <a href="https://github.com/vissense/angular-vissense">angular-vissense</a> - but is also quite simple to recreate with or without any other framework.</p></div></div><h4>html</h4><pre data-tbk-code-prettify="" data-lang="html">\n&lt;form&gt;\n  &lt;label>Amount: &lt;/label&gt;\n  &lt;input type="number" data-ng-model="model.monitorCount" min="1" max="200"&gt;\n&lt;/form&gt;\n\n&lt;div class="monitor-container" data-ng-repeat="i in [] | range:model.monitorCount"&gt;\n  &lt;div vissense-monitor\n       on-fullyvisible="model.logEvent(\'fullyvisible\')"\n       on-visible="model.logEvent(\'visible\')"\n       on-hidden="model.logEvent(\'hidden\')"&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</pre><h4>controller</h4><pre data-tbk-code-prettify="">\n'+"module.controller('ManyMonitorsDemoCtrl', ['$scope','$log',\nfunction ($scope, $log) {\n  $scope.model = {\n    monitorCount: 42\n  };\n\n  $scope.model.logEvent = function(description) {\n    $log.info(description);\n  };\n}]);\n</pre></section></div></div>")}])}(),function(e){try{e=angular.module("vissensePlayground")}catch(t){e=angular.module("vissensePlayground",[])}e.run(["$templateCache",function(e){e.put("partials/demos/demo_angular_vissense_monitor.html",'<section data-tbk-default-demo-navigation=""></section><header class="container"><h2>[Demo] Angular Directives Demo</h2></header><div class="container" id="draggable-example-container" style="margin-top: 30px;"><style>\n#alert-container {\n  z-index: 999;\n  position: fixed;\n  right: 10px;\n  top:10px;\n  width: 380px;\n  font-size: 0.8em;\n}\n#alert-container .alert {\n  margin: 10px;\n  padding: 3px;\n  box-shadow: 1px 1px 8px 2px rgba(0, 0, 0, 0.4);\n  background-color: rgba(242,242,242,0.9);\n}\n</style><div id="alert-container"><div class="alert" data-ng-repeat="event in model.events | reverse" data-ng-class="{ \'color--danger\': event.name == \'hidden\', \'color--green\': event.name == \'fullyvisible\', \'color--yellow\': event.name == \'visible\', \'color--highlight\': event.name == \'visibilitychange\', \'color--learning\': event.name == \'percentagechange\' }"><div><i class="fa fa-clock-o"></i> {{event.time | date:\'MMM d, y h:mm:ss.sss a\'}}</div><div>{{event.name}}</div><div>{{event.description}}</div></div></div><div id="example1" class="default-draggable-element" data-tbk-draggable="" data-vissense-monitor="" on-visibilitychange="addEvent(\'visibilitychange\', \'Element became hidden\')" on-percentagechange="addPercentageEvent(newValue, oldValue)" on-hidden="addEvent(\'hidden\', \'Element became hidden\')" on-visible="addEvent(\'visible\', \'Element became visible\')" on-fullyvisible="addEvent(\'fullyvisible\', \'Element became fully visible\')"><div tbk-default-draggable-element="example1"></div></div><div class="lorem-ipsum"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio. Praesent libero. Sed cursus ante dapibus diam. Sed nisi. Nulla quis sem at nibh elementum imperdiet. Duis sagittis ipsum. Praesent mauris. Fusce nec tellus sed augue semper porta. Mauris massa. Vestibulum lacinia arcu eget nulla. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Curabitur sodales ligula in libero.</p></div><h3>Code</h3><pre data-tbk-code-prettify="" data-lang="html">\n&lt;div data-vissense-monitor\n   on-visibilitychange="addEvent(\'visibilitychange\', \'Element became hidden\')"\n   on-percentagechange="addPercentageEvent(newValue, oldValue)"\n   on-hidden="addEvent(\'hidden\', \'Element became hidden\')"\n   on-visible="addEvent(\'visible\', \'Element became visible\')"\n   on-fullyvisible="addEvent(\'fullyvisible\', \'Element became fully visible\')"&gt;\n  ...\n&lt;/div&gt;\n</pre><br data-ng-repeat="i in [1,2,3,4,5,6,7,8,9,10,11,12,13]"></div>')}])}(),function(e){try{e=angular.module("vissensePlayground")}catch(t){e=angular.module("vissensePlayground",[])}e.run(["$templateCache",function(e){e.put("partials/demos/demo_draggable_element.html",'<section data-tbk-default-demo-navigation=""></section><header class="container"><h2>[Demo] Draggable Element Demo</h2></header><section class="styleguide__editorial-header"><div class="editorial-header"><div class="container"><p class="editorial-header__excerpt g-wide--pull-1">This demo lets you drag an element around the screen to explore the main features of VisSense.js, which essentially are measuring the state of the element and the percentage of the surface area within the visible area of a viewer\'s browser window on an in focus web page.</p><p class="g-wide--pull-1">In this example the element is considered "hidden" if its surface area is less than 10% and "fullyvisibile" if it is more than 90%. See the code below.</p></div></div></section><div class="container" id="draggable-example-container"><table class="table-2" style="margin-bottom: 30px;"><colgroup><col span="1"><col span="1"></colgroup><thead><tr><th>state</th><th>percentage</th></tr></thead><tbody><tr><td><span data-vissense-state="myElement" data-fullyvisible="0.9" data-hidden="0.1"></span></td><td><span data-vissense-percentage="myElement"></span></td></tr></tbody></table><div id="myElement" class="default-draggable-element" data-tbk-draggable=""><div tbk-default-draggable-element="myElement"></div></div><h3>state()</h3><section class="styleguide__editorial-header"><div class="editorial-header"><div class="container"><p class="g-wide--pull-1">Drag the element around to see the <code>state</code> property change its value.</p></div></div></section><pre data-vissense-state-debug="myElement"></pre><h3>Code</h3><pre data-tbk-code-prettify="">\nvar element = document.getElementById(\'myElement\');\nvar visobj = VisSense(element, {\n  hidden: 0.1,\n  fullyvisible: 0.9\n});\n\nvar vismon = visobj.monitor({\n  strategy: new VisSense.VisMon.Strategy.PollingStrategy()\n}).start();\n\nvismon.state();\n  </pre><br data-ng-repeat="i in [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]"></div>')}])}(),function(e){try{e=angular.module("vissensePlayground")}catch(t){e=angular.module("vissensePlayground",[])}e.run(["$templateCache",function(e){e.put("partials/demos/demo_fire_callbacks.html",'<section data-tbk-default-demo-navigation=""></section><style>\n  .log-container {\n    font-size: 0.8em;\n\n    height: 400px;\n    margin-bottom: 30px;\n\n    overflow-y: scroll;\n  }\n\n  .log {\n    padding: 5px;\n    margin-bottom: 3px;\n  }\n\n</style><header class="container"><h2>[Demo] Fire Callbacks Demo</h2></header><section class="styleguide__editorial-header"><div class="editorial-header"><div class="container"><p class="editorial-header__excerpt g-wide--pull-1">This demo demonstrates the events fired during monitoring a target elements visibility.</p><p class="g-wide--pull-1">Move the element around to update the table content with triggered events. Notice the behaviour of the "visible" event - it will always be triggered when transitioning from "hidden" but it wont fire when changing from "fullyvisible" to "visible" (while instead a "visibilitychange" event will be triggered).</p></div></div></section><div class="container" id="draggable-example-container"><div class=""><div class="log-container" style="margin-top: 26px;"><table class="table-3" style="margin-top: 0;"><thead><tr><th>time</th><th>event</th><th>description</th></tr></thead><tbody><tr data-ng-repeat="event in model.events | reverse" class="log alert" data-ng-class="{ \'color--danger\': event.name == \'hidden\', \'color--green\': event.name == \'fullyvisible\', \'color--yellow\': event.name == \'visible\', \'color--highlight\': event.name == \'visibilitychange\', \'color--learning\': event.name == \'percentagechange\' }"><td class="pull-right"><i class="fa fa-clock-o"></i> {{event.time | date:\'MMM d, y h:mm:ss.sss a\'}}</td><td>{{event.name}}</td><td>{{event.description}}</td></tr></tbody></table></div><div style="margin-bottom: 20px;"><div id="example1" class="default-draggable-element" data-tbk-draggable="" data-vissense-monitor="" on-visibilitychange="addEvent(\'visibilitychange\', \'Element became hidden\')" on-percentagechange="addPercentageEvent(newValue, oldValue)" on-hidden="addEvent(\'hidden\', \'Element became hidden\')" on-visible="addEvent(\'visible\', \'Element became visible\')" on-fullyvisible="addEvent(\'fullyvisible\', \'Element became fully visible\')"><div tbk-default-draggable-element="example1"></div></div></div></div><h3>Code</h3><pre data-tbk-code-prettify="">\nvar element = document.getElementById(\'example1\');\nvar visobj = new VisSense(element);\n\nvar vismon = visobj.monitor({\n  strategy: new VisSense.VisMon.Strategy.PollingStrategy(1000),\n  fullyvisible: function() { ... },\n  hidden: function() { ... },\n  visible: function() { ... },\n  update: function() { ... },\n  percentagechange: function(newValue, oldValue) { ... },\n  visibilitychange: function() { ... }\n}).start();\n</pre><div data-ng-repeat="i in [1,2,3,4,5,6]" style="height: 100px;"></div></div>')}])}(),function(e){try{e=angular.module("vissensePlayground")}catch(t){e=angular.module("vissensePlayground",[])}e.run(["$templateCache",function(e){e.put("partials/demos/demo_percentage_time_test.html",'<section data-tbk-default-demo-navigation=""></section><header class="container"><h2>[Demo] Percentage Time Tests</h2></header><section class="styleguide__editorial-header"><div class="editorial-header"><div class="container"><p class="editorial-header__excerpt g-wide--pull-1">Percentage time tests inform you when an element has passed a viewability test. The 60/1-Test for example is passed only if at least 60% of the elements surface area is within the visible area of a viewer\'s browser window on an in focus web page for at least one second.</p><p class="g-wide--pull-1">A percentage time test will start once the target element becomes visible the first and time and restarts if the percentage falls below the percentage limit and the test has not been passed yet.</p></div></div></section><div class="container" id="draggable-example-container"><table class="table-5" style="margin-bottom: 30px;"><colgroup><col span="1"><col span="1"><col span="1"><col span="1"><col span="1"></colgroup><thead><tr><th>percentage</th><th>50/1 Test</th><th>60/1 Test</th><th>66/3 Test *</th><th>100/10 Test **</th></tr></thead><tbody><tr><td><span data-vissense-percentage="myElement"></span></td><td><span data-vissense-fifty-one-test="myElement"></span></td><td><span data-vissense-sixty-one-test="myElement"></span></td><td><span data-vissense-percentage-time-test="myElement" data-percentage-limit="0.66" ,="" data-time-limit="3000" data-interval="100"></span></td><td><span data-vissense-percentage-time-test="myElement" data-percentage-limit="1" ,="" data-time-limit="10000" data-interval="100"></span></td></tr></tbody></table><div id="myElement" class="default-draggable-element" data-tbk-draggable=""><div tbk-default-draggable-element="myElement"></div></div><section class="styleguide__editorial-header"><div class="editorial-header"><div class="container"><p class=""><small>* 66/3 Test: At least 66% visible for 3 seconds.</small><br><small>** 100/10 Test: Fully visible for 10 seconds.</small><br></p></div></div></section><h3>Code</h3><pre data-tbk-code-prettify="">\nvar element = document.getElementById(\'myElement\');\nvar visobj = VisSense(element);\n\n// 50/1 test\nvisobj.onPercentageTimeTestPassed(function() {\n  ...\n}, {\n  percentageLimit: 0.5,\n  timeLimit: 1000,\n  interval: 100\n});\n\n// 100/10 test\nvisobj.onPercentageTimeTestPassed(function() {\n  ...\n}, {\n  percentageLimit: 1,\n  timeLimit: 10000,\n  interval: 100\n});\n</pre><br data-ng-repeat="i in [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]"></div>')}])}(),function(e){try{e=angular.module("vissensePlayground")}catch(t){e=angular.module("vissensePlayground",[])}e.run(["$templateCache",function(e){e.put("partials/demos/demo_track_sections.html",'<section data-tbk-default-demo-navigation=""></section><style>\n\n  .section-stats-container {\n    margin: 0px;\n    padding: 9px;\n    position: fixed;\n    left: 42px;\n    bottom: 13px;\n    width: 600px;\n    height: 140px;\n    box-shadow: 3px 3px 15px 3px rgba(0, 0, 0, 0.4);\n    z-index: 99999;\n    background-color: rgba(242,242,242,0.9);\n   }\n</style><header class="container"><h2>[Demo] Track Section Demo</h2></header><div class="section-stats-container"><ul><li><a data-ng-click="scrollToElement(\'examples-section\')">section 1</a> <span data-vissense-state="examples-section"></span></li><li><a data-ng-click="scrollToElement(\'demo-section\')">section 2</a> <span data-vissense-state="demo-section"></span></li><li><a data-ng-click="scrollToElement(\'plugins-section\')">section 3</a> <span data-vissense-state="plugins-section"></span></li></ul></div><div class=""><div class="code-sample"><div class="highlight-module highlight-module--left highlight-module--learning" id="examples-section"><div class="highlight-module__container"><div class="pull-left" style="font-size: 150px; padding: 30px;"><span class="fa fa-eye"></span></div><div class="highlight-module__content g-wide--push-1 g-wide--pull-1 g-medium--push-1"><h2 class="highlight-module__title">1 Track visibility</h2><p class="highlight-module__text">immediately know when an element becomes hidden, partly visible or fully visible.</p></div></div></div></div><div class="code-sample"><div class="highlight-module highlight-module--right highlight-module--remember" id="demo-section"><div class="highlight-module__container row"><div class="pull-right" style="font-size: 150px; padding: 30px;"><span class="fa fa-paw"></span></div><div class="highlight-module__content g-wide--push-1 g-wide--pull-1 g-medium--pull-1"><h2 class="highlight-module__title">2 Observe changes</h2><p class="highlight-module__text">react on visibility changes and execute proper actions.</p></div></div></div></div><div class="code-sample"><div class="highlight-module highlight-module--left highlight-module--learning" id="plugins-section"><div class="highlight-module__container"><div class="pull-left" style="font-size: 150px; padding: 30px;"><span class="fa fa-puzzle-piece"></span></div><div class="highlight-module__content g-wide--push-1 g-wide--pull-1 g-medium--pull-1"><h2 class="highlight-module__title">3 Create extensions</h2><p class="highlight-module__text">vissense.js can be extended. checkout existing plugins or create your own extension - it\'s supereasy.</p></div></div></div></div></div><h3>Code</h3>This examples uses jQuery to fade in the sections.<pre data-tbk-code-prettify="">\nvar startOpacityMonitor = function(elementId) {\n  var sectionElement = jQuery(\'#\' + elementId);\n  var sectionMonitor = VisSense(sectionElement[0]).monitor({\n    // update when user scrolls or resizes the page\n    strategy : VisSense.VisMon.Strategy.EventStrategy({ debounce: 100 }),\n\n    percentagechange: function(newValue, oldValue) {\n      var difference = newValue - oldValue;\n      var duration = 500 * Math.max(difference, 0.5);\n      var opacity = Math.max(newValue, 0.25);\n      sectionElement.fadeTo(duration, opacity);\n    }\n  }).start();\n\n  return function stopOpacityMonitor() {\n    sectionMonitor.stop();\n  };\n};\n\nvar stop = startOpacityMonitor(\'examples-section\');\n\n...\n\nif (/* user leaves the page, etc. */) {\n  stop();\n}\n\n\n</pre><br data-ng-repeat="i in [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]">')}])}(),function(e){try{e=angular.module("vissensePlayground")}catch(t){e=angular.module("vissensePlayground",[])}e.run(["$templateCache",function(e){e.put("partials/demos/demo_track_visibility.html",'<section data-tbk-default-demo-navigation=""></section><header class="container"><h2>[Demo] Track Viewtime Demo</h2></header><div class="container" id="draggable-example-container" style="margin-top: 30px;"><div id="example1" class="default-draggable-element" data-tbk-draggable=""><div tbk-default-draggable-element="example1"></div></div><div data-vissense-metrics-infocard="example1"></div><div class="lorem-ipsum"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio. Praesent libero. Sed cursus ante dapibus diam. Sed nisi. Nulla quis sem at nibh elementum imperdiet. Duis sagittis ipsum. Praesent mauris. Fusce nec tellus sed augue semper porta. Mauris massa. Vestibulum lacinia arcu eget nulla. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Curabitur sodales ligula in libero.</p><p>Sed dignissim lacinia nunc. Curabitur tortor. Pellentesque nibh. Aenean quam. In scelerisque sem at dolor. Maecenas mattis. Sed convallis tristique sem. Proin ut ligula vel nunc egestas porttitor. Morbi lectus risus, iaculis vel, suscipit quis, luctus non, massa. Fusce ac turpis quis ligula lacinia aliquet. Mauris ipsum. Nulla metus metus, ullamcorper vel, tincidunt sed, euismod in, nibh.</p><p>Quisque volutpat condimentum velit. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Nam nec ante. Sed lacinia, urna non tincidunt mattis, tortor neque adipiscing diam, a cursus ipsum ante quis turpis. Nulla facilisi. Ut fringilla. Suspendisse potenti. Nunc feugiat mi a tellus consequat imperdiet. Vestibulum sapien. Proin quam. Etiam ultrices.</p><p>Suspendisse in justo eu magna luctus suscipit. Sed lectus. Integer euismod lacus luctus magna. Quisque cursus, metus vitae pharetra auctor, sem massa mattis sem, at interdum magna augue eget diam. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Morbi lacinia molestie dui. Praesent blandit dolor. Sed non quam. In vel mi sit amet augue congue elementum. Morbi in ipsum sit amet pede facilisis laoreet. Donec lacus nunc, viverra nec, blandit vel, egestas et, augue. Vestibulum tincidunt malesuada tellus. Ut ultrices ultrices enim.</p><p>Curabitur sit amet mauris. Morbi in dui quis est pulvinar ullamcorper. Nulla facilisi. Integer lacinia sollicitudin massa. Cras metus. Sed aliquet risus a tortor. Integer id quam. Morbi mi. Quisque nisl felis, venenatis tristique, dignissim in, ultrices sit amet, augue. Proin sodales libero eget ante. Nulla quam. Aenean laoreet. Vestibulum nisi lectus, commodo ac, facilisis ac, ultricies eu, pede. Ut orci risus, accumsan porttitor, cursus quis, aliquet eget, justo.</p><p>Praesent blandit dolor. Sed non quam. In vel mi sit amet augue congue elementum. Morbi in ipsum sit amet pede facilisis laoreet. Donec lacus nunc, viverra nec, blandit vel, egestas et, augue. Vestibulum tincidunt malesuada tellus. Ut ultrices ultrices enim. Curabitur sit amet mauris. Morbi in dui quis est pulvinar ullamcorper. Nulla facilisi. Integer lacinia sollicitudin massa. Cras metus. Sed aliquet risus a tortor. Integer id quam.</p></div><br data-ng-repeat="i in [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]"></div>')}])}(),function(e){try{e=angular.module("vissensePlayground")}catch(t){e=angular.module("vissensePlayground",[])}e.run(["$templateCache",function(e){e.put("partials/directives/default-draggable-element.html",'<div style="text-align: center"><i class="icon icon-user-input"></i><br><span>Drag me!</span><br><span data-vissense-percentage="{{ elementId }}"></span></div>')}])}(),function(e){try{e=angular.module("vissensePlayground")}catch(t){e=angular.module("vissensePlayground",[])}e.run(["$templateCache",function(e){e.put("partials/documentation/api.html",'<h3 class="h3">vissense</h3><div data-hljs="">vis.percentage();</div><span>gets the current visible percentage (0..1)</span><hr><div data-hljs="">vis.isHidden();</div><span>true if element is hidden</span><hr><div data-hljs="">vis.isVisible();</div><span>true if element is visible</span><hr><div data-hljs="">vis.isFullyVisible();</div><span>true if element is fully visible</span><hr><div data-hljs="">vis.state();</div><span>gets an object representing the current state</span><div data-hljs="">{ "code": 1, "state": "visible", "percentage": 0.55, "visible": true, "fullyvisible": false, "hidden": false "previous" : {} }</div><hr><h3 class="h3">vissense-monitor</h3><ul><li><code>start()</code> starts observing the element</li><li><code>stop()</code> stops observing the element</li><li><code>update()</code> manually run the update procedure. this will fire any registered handlers</li></ul><hr><div data-hljs="">vismon.on();</div><span>registers an event handler</span><div data-hljs="">vismon.on(\'update\', function(monitor) { ... }); vismon.on(\'hidden\', function(monitor) { ... }); vismon.on(\'visible\', function(monitor) { ... }); vismon.on(\'fullyvisible\', function(monitor) { ... }); vismon.on(\'percentagechange\', function(newValue, oldValue, monitor) { ... }); vismon.on(\'visibilitychange\', function(monitor) { ... });</div><hr><div data-hljs="">vismon.state();</div><span>gets an object representing the current state</span><div data-hljs="">{ "code": 1, "state": "visible", "percentage": 0.55, "visible": true, "fullyvisible": false, "hidden": false "previous" : { "code": 2, "state": "fullyvisible", "percentage": 1, "visible": true, "fullyvisible": true, "hidden": false } }</div><hr>')}])}(),function(e){try{e=angular.module("vissensePlayground")}catch(t){e=angular.module("vissensePlayground",[])}e.run(["$templateCache",function(e){e.put("partials/documentation/usage.html",'<p>Include <code>vissense.js</code> in your page, it has no dependencies.</p><p>Call <code>VisSense()</code> passing an element node and an optional config object:</p><ul><li><code>hidden</code> <span class="label label-default">default: 0</span> if percentage is equal or below this limit the element is considered hidden</li><li><code>fullyvisible</code><span class="label label-default">default: 1</span> if percentage is equal or above this limit the element is considered fully visible</li></ul><div data-hljs="">var element = document.getElementById(\'my-element\'); var vis = new VisSense(element, { hidden: 0.1, fullyvisible: 0.9 });</div><h3 class="h3">vissense-monitor</h3><p>Call <code>monitor()</code> of your vissense instance passing an optional config object with the following:</p><ul><li><code>update</code> function to run when elements update function is called</li><li><code>hidden</code> function to run when element becomes hidden</li><li><code>visible</code> function to run when element becomes visible</li><li><code>fullyvisible</code> function to run when element becomes fully visible</li><li><code>visibilitychange</code> function to run when the visibility of the element changes</li><li><code>percentagechange</code> function to run when the percentage of the element changes</li><li><code>strategy</code> the strategy for observing the element. vissense comes with three predefined strategies:<ul><li><code>NoopStrategy</code> <span class="label label-default">default</span> this strategy (like implied by its name) does nothing on its own. it is your responsibility to invoke <code>update()</code> on the monitor instance.</li><li><code>EventStrategy</code> this strategy registers event handlers for <code>visibilitychange</code>, <code>scroll</code> and <code>resize</code> and calls <code>update()</code> accordingly.</li><li><code>PollingStrategy</code> this strategy invokes <code>update()</code> periodically.</li></ul></li></ul><div data-hljs="">var vismon = vis.monitor({ strategy: new VisSense.VisMon.Strategy.PollingStrategy({ interval: 1000 // ms }), update: function() { ... }, hidden: function() { ... }, visible: function() { ... }, fullyvisible: function() { ... }, visibilitychange: function() { ... }, percentagechange: function() { ... } });</div><p>alternatively you can always register event handlers later with <code>on()</code></p><div data-hljs="">vismon.on(\'percentagechange\', function() { ... });</div>')}])}(),function(e){try{e=angular.module("vissensePlayground")}catch(t){e=angular.module("vissensePlayground",[])}e.run(["$templateCache",function(e){e.put("partials/navs/bottom.html",'<div class="container"><div class="footer" id="footer"><p class="pull-right">with <i class="fa fa-code"></i></p></div></div><div data-tbk-github-fork-ribbon="vissense/vissense" data-label="Fork me on GitHub"></div>')}])}(),function(e){try{e=angular.module("vissensePlayground")}catch(t){e=angular.module("vissensePlayground",[])}e.run(["$templateCache",function(e){e.put("partials/navs/header.html",'<div><header class="app-bar promote-layer"><div class="app-bar-container"><button class="menu"><i class="fa fa-list"></i></button><h1 class="logo"><a data-ui-sref="home">Vis<strong>Sense</strong>.js</a> <a href="https://travis-ci.org/vissense/vissense"><img src="https://travis-ci.org/vissense/vissense.svg?branch=master"></a> <a href="https://coveralls.io/r/vissense/vissense"><img src="https://coveralls.io/repos/vissense/vissense/badge.png"></a></h1></div></header><nav class="navdrawer-container promote-layer"><h4>Navigation</h4><ul><li data-ui-sref-active="active"><a data-ui-sref="demos.overview">Demos</a></li><li><p style="color:#bbb;">Version <span data-tbk-github-version="vissense/vissense"></span></p></li><li><a href="https://github.com/vissense/vissense"><i class="fa fa-github"></i> GitHub Project</a></li></ul></nav></div>')}])}(),function(e){try{e=angular.module("vissensePlayground")}catch(t){e=angular.module("vissensePlayground",[])}e.run(["$templateCache",function(e){e.put("partials/navs/top.html",'<div class="container"><div class="row"><div class="header"><ul class="nav nav-pills pull-right"><li data-ui-sref-active="active"><a data-ui-sref="home">Home</a></li><li data-ui-sref-active="active"><a data-ui-sref="gettingstarted">Getting started</a></li><li data-ui-sref-active="active"><a data-ui-sref="documentation">Documentation</a></li><li data-ui-sref-active="active"><a data-ui-sref="demos.overview">Demos</a></li></ul><h3 class="h3"><img src="images/logo.png" alt="logo" class="logo" height="30"> vissense.js</h3></div></div></div>')
}])}();